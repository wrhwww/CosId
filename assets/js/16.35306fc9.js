(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{474:function(t,e,v){"use strict";v.r(e);var _=v(20),a=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"ç®€ä»‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹"}},[t._v("#")]),t._v(" ç®€ä»‹")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{width:"200",src:t.$withBase("/logo.png"),alt:"CosId Logo"}})]),t._v(" "),v("p",[v("a",{attrs:{href:"https://www.apache.org/licenses/LICENSE-2.0.html",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"https://img.shields.io/badge/license-Apache%202-4EB1BA.svg",alt:"License"}}),v("OutboundLink")],1),t._v(" "),v("a",{attrs:{href:"https://github.com/Ahoo-Wang/CosId/releases",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"https://img.shields.io/github/release/Ahoo-Wang/CosId.svg",alt:"GitHub release"}}),v("OutboundLink")],1),t._v(" "),v("a",{attrs:{href:"https://maven-badges.herokuapp.com/maven-central/me.ahoo.cosid/cosid-core",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"https://maven-badges.herokuapp.com/maven-central/me.ahoo.cosid/cosid-core/badge.svg",alt:"Maven Central"}}),v("OutboundLink")],1),t._v(" "),v("a",{attrs:{href:"https://app.codacy.com/gh/Ahoo-Wang/CosId?utm_source=github.com&utm_medium=referral&utm_content=Ahoo-Wang/CosId&utm_campaign=Badge_Grade_Settings",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"https://api.codacy.com/project/badge/Grade/dfd1d6237a1644409548ebfbca300dc1",alt:"Codacy Badge"}}),v("OutboundLink")],1),t._v(" "),v("a",{attrs:{href:"https://codecov.io/gh/Ahoo-Wang/CosId",target:"_blank",rel:"noopener noreferrer"}},[v("img",{attrs:{src:"https://codecov.io/gh/Ahoo-Wang/CosId/branch/main/graph/badge.svg?token=L0N51NB7ET",alt:"codecov"}}),v("OutboundLink")],1),t._v(" "),v("img",{attrs:{src:"https://github.com/Ahoo-Wang/CosId/actions/workflows/integration-test.yml/badge.svg",alt:"Integration Test Status"}})]),t._v(" "),v("p",[v("em",[v("a",{attrs:{href:"https://github.com/Ahoo-Wang/CosId",target:"_blank",rel:"noopener noreferrer"}},[t._v("CosId"),v("OutboundLink")],1)]),t._v(" æ—¨åœ¨æä¾›é€šç”¨ã€çµæ´»ã€é«˜æ€§èƒ½çš„åˆ†å¸ƒå¼ ID ç”Ÿæˆå™¨ã€‚")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("SnowflakeId")]),t._v(" : "),v("em",[t._v("å•æœº TPS æ€§èƒ½ï¼š409W/s")]),t._v(" "),v("RouterLink",{attrs:{to:"/guide/perf-test.html"}},[t._v("JMH åŸºå‡†æµ‹è¯•")]),t._v(" , ä¸»è¦è§£å†³ "),v("em",[t._v("æ—¶é’Ÿå›æ‹¨é—®é¢˜")]),t._v(" ã€"),v("em",[t._v("æœºå™¨å·åˆ†é…é—®é¢˜")]),t._v(" å¹¶ä¸”æä¾›æ›´åŠ å‹å¥½ã€çµæ´»çš„ä½¿ç”¨ä½“éªŒã€‚")],1),t._v(" "),v("li",[v("code",[t._v("SegmentId")]),t._v(": æ¯æ¬¡è·å–ä¸€æ®µ ("),v("code",[t._v("Step")]),t._v(") IDï¼Œæ¥é™ä½å·æ®µåˆ†å‘å™¨çš„ç½‘ç»œIOè¯·æ±‚é¢‘æ¬¡æå‡æ€§èƒ½ã€‚\n"),v("ul",[v("li",[v("code",[t._v("IdSegmentDistributor")]),t._v(": å·æ®µåˆ†å‘å™¨ï¼ˆå·æ®µå­˜å‚¨å™¨ï¼‰\n"),v("ul",[v("li",[v("code",[t._v("RedisIdSegmentDistributor")]),t._v(": åŸºäº "),v("em",[t._v("Redis")]),t._v(" çš„å·æ®µåˆ†å‘å™¨ã€‚")]),t._v(" "),v("li",[v("code",[t._v("JdbcIdSegmentDistributor")]),t._v(": åŸºäº "),v("em",[t._v("Jdbc")]),t._v(" çš„å·æ®µåˆ†å‘å™¨ï¼Œæ”¯æŒå„ç§å…³ç³»å‹æ•°æ®åº“ã€‚")]),t._v(" "),v("li",[v("code",[t._v("ZookeeperIdSegmentDistributor")]),t._v(": åŸºäº "),v("em",[t._v("Zookeeper")]),t._v(" çš„å·æ®µåˆ†å‘å™¨ã€‚")])])])])]),t._v(" "),v("li",[v("code",[t._v("SegmentChainId")]),t._v("("),v("strong",[t._v("æ¨è")]),t._v("):"),v("code",[t._v("SegmentChainId")]),t._v(" ("),v("em",[t._v("lock-free")]),t._v(") æ˜¯å¯¹ "),v("code",[t._v("SegmentId")]),t._v(" çš„å¢å¼ºã€‚æ€§èƒ½å¯è¾¾åˆ°è¿‘ä¼¼ "),v("code",[t._v("AtomicLong")]),t._v(" çš„ "),v("em",[t._v("TPS æ€§èƒ½:12743W+/s")]),t._v(" "),v("RouterLink",{attrs:{to:"/guide/perf-test.html"}},[t._v("JMH åŸºå‡†æµ‹è¯•")]),t._v(" ã€‚\n"),v("ul",[v("li",[v("code",[t._v("PrefetchWorker")]),t._v(" ç»´æŠ¤å®‰å…¨è·ç¦»("),v("code",[t._v("safeDistance")]),t._v("), å¹¶ä¸”æ”¯æŒåŸºäºé¥¥é¥¿çŠ¶æ€çš„åŠ¨æ€"),v("code",[t._v("safeDistance")]),t._v("æ‰©å®¹/æ”¶ç¼©ã€‚")])])],1)]),t._v(" "),v("h2",{attrs:{id:"èƒŒæ™¯-ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼id"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯-ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼id"}},[t._v("#")]),t._v(" èƒŒæ™¯ï¼ˆä¸ºä»€ä¹ˆéœ€è¦"),v("em",[t._v("åˆ†å¸ƒå¼ID")]),t._v("ï¼‰")]),t._v(" "),v("p",[t._v("åœ¨è½¯ä»¶ç³»ç»Ÿæ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œéšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ (TPS/å­˜å‚¨å®¹é‡)ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡é›†ç¾¤åŒ–éƒ¨ç½²æ¥åˆ†æ‘Šè®¡ç®—ã€å­˜å‚¨å‹åŠ›ã€‚\nåº”ç”¨æœåŠ¡çš„æ— çŠ¶æ€è®¾è®¡ä½¿å…¶å…·å¤‡äº†ä¼¸ç¼©æ€§ã€‚åœ¨ä½¿ç”¨ "),v("strong",[t._v("Kubernetes")]),t._v(" éƒ¨ç½²æ—¶æˆ‘ä»¬åªéœ€è¦ä¸€è¡Œå‘½ä»¤å³å¯å®ŒæˆæœåŠ¡ä¼¸ç¼©\n("),v("code",[t._v("kubectl scale --replicas=5 deployment/order-service")]),t._v(")ã€‚")]),t._v(" "),v("p",[t._v("ä½†å¯¹äºæœ‰çŠ¶æ€çš„æ•°æ®åº“å°±ä¸é‚£ä¹ˆå®¹æ˜“äº†ï¼Œæ­¤æ—¶æ•°æ®åº“å˜æˆç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚")]),t._v(" "),v("h3",{attrs:{id:"åˆ†åº“åˆ†è¡¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åº“åˆ†è¡¨"}},[t._v("#")]),t._v(" åˆ†åº“åˆ†è¡¨")]),t._v(" "),v("blockquote",[v("p",[t._v("ä»å¾®æœåŠ¡çš„è§’åº¦æ¥ç†è§£å‚ç›´æ‹†åˆ†å…¶å®å°±æ˜¯å¾®æœåŠ¡æ‹†åˆ†ã€‚ä»¥é™ç•Œä¸Šä¸‹æ–‡æ¥å®šä¹‰æœåŠ¡è¾¹ç•Œå°†å¤§æœåŠ¡/å•ä½“åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªè‡ªæ²»çš„ç²’åº¦æ›´å°çš„æœåŠ¡ï¼Œå› ä¸ºè‡ªæ²»æ€§è§„èŒƒè¦æ±‚ï¼Œæ•°æ®åº“ä¹Ÿéœ€è¦è¿›è¡Œä¸šåŠ¡æ‹†åˆ†ã€‚\nä½†å‚ç›´æ‹†åˆ†åçš„å•ä¸ªå¾®æœåŠ¡ä¾ç„¶ä¼šé¢ä¸´ TPS/å­˜å‚¨å®¹é‡ çš„æŒ‘æˆ˜ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é‡ç‚¹è®¨è®ºæ°´å¹³æ‹†åˆ†çš„æ–¹å¼ã€‚")])]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/shardingsphere/sharding-db.png"),alt:"åˆ†åº“åˆ†è¡¨"}})]),t._v(" "),v("p",[t._v("æ•°æ®åº“åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆæ˜¯é€»è¾‘ç»Ÿä¸€ï¼Œç‰©ç†åˆ†åŒºè‡ªæ²»çš„æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒè®¾è®¡åœ¨äºä¸­é—´å±‚æ˜ å°„æ–¹æ¡ˆçš„è®¾è®¡ (ä¸Šå›¾ "),v("strong",[t._v("Mapping")]),t._v(")ï¼Œå³åˆ†ç‰‡ç®—æ³•çš„è®¾è®¡ã€‚\nå‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½å†…ç½®å®ç°äº†æ•£åˆ—è¡¨(java:"),v("code",[t._v("HashMap")]),t._v("/csharp:"),v("code",[t._v("Dictionary")]),t._v("/python:"),v("code",[t._v("dict")]),t._v("/go:"),v("code",[t._v("map")]),t._v(" ...)ã€‚åˆ†ç‰‡ç®—æ³•è·Ÿæ•£åˆ—è¡¨é«˜åº¦ç›¸ä¼¼("),v("code",[t._v("hashCode")]),t._v(")ï¼Œéƒ½å¾—é€šè¿‡ "),v("code",[t._v("key")]),t._v("/"),v("code",[t._v("shardingValue")]),t._v(" æ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½("),v("code",[t._v("slot")]),t._v(")ã€‚")]),t._v(" "),v("p",[t._v("é‚£ä¹ˆ "),v("code",[t._v("shardingValue")]),t._v(" ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ"),v("strong",[t._v("CosId")]),t._v("ï¼ï¼ï¼")]),t._v(" "),v("blockquote",[v("p",[t._v("å½“ç„¶è¿˜æœ‰å¾ˆå¤šåˆ†å¸ƒå¼åœºæ™¯éœ€è¦"),v("em",[t._v("åˆ†å¸ƒå¼ID")]),t._v("ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€åˆ—ä¸¾ã€‚")])]),t._v(" "),v("h2",{attrs:{id:"åˆ†å¸ƒå¼idæ–¹æ¡ˆçš„æ ¸å¿ƒæŒ‡æ ‡"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼idæ–¹æ¡ˆçš„æ ¸å¿ƒæŒ‡æ ‡"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼IDæ–¹æ¡ˆçš„æ ¸å¿ƒæŒ‡æ ‡")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("å…¨å±€ï¼ˆç›¸åŒä¸šåŠ¡ï¼‰å”¯ä¸€æ€§")]),t._v("ï¼šå”¯ä¸€æ€§ä¿è¯æ˜¯"),v("strong",[t._v("ID")]),t._v("çš„å¿…è¦æ¡ä»¶ï¼Œå‡è®¾IDä¸å”¯ä¸€å°±ä¼šäº§ç”Ÿä¸»é”®å†²çªï¼Œè¿™ç‚¹å¾ˆå®¹æ˜“å¯ä»¥ç†è§£ã€‚\n"),v("ul",[v("li",[t._v("é€šå¸¸æ‰€è¯´çš„å…¨å±€å”¯ä¸€æ€§å¹¶ä¸æ˜¯æŒ‡æ‰€æœ‰ä¸šåŠ¡æœåŠ¡éƒ½è¦å”¯ä¸€ï¼Œè€Œæ˜¯ç›¸åŒä¸šåŠ¡æœåŠ¡ä¸åŒéƒ¨ç½²å‰¯æœ¬å”¯ä¸€ã€‚\næ¯”å¦‚ Order æœåŠ¡çš„å¤šä¸ªéƒ¨ç½²å‰¯æœ¬åœ¨ç”Ÿæˆ"),v("code",[t._v("t_order")]),t._v("è¿™å¼ è¡¨çš„"),v("code",[t._v("Id")]),t._v("æ—¶æ˜¯è¦æ±‚å…¨å±€å”¯ä¸€çš„ã€‚è‡³äº"),v("code",[t._v("t_order_item")]),t._v("ç”Ÿæˆçš„"),v("code",[t._v("ID")]),t._v("ä¸"),v("code",[t._v("t_order")]),t._v("æ˜¯å¦å”¯ä¸€ï¼Œå¹¶ä¸å½±å“å”¯ä¸€æ€§çº¦æŸï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿä»€ä¹ˆå‰¯ä½œç”¨ã€‚\nä¸åŒä¸šåŠ¡æ¨¡å—é—´ä¹Ÿæ˜¯åŒç†ã€‚å³å”¯ä¸€æ€§ä¸»è¦è§£å†³çš„æ˜¯IDå†²çªé—®é¢˜ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("æœ‰åºæ€§")]),t._v("ï¼šæœ‰åºæ€§ä¿è¯æ˜¯é¢å‘æŸ¥è¯¢çš„æ•°æ®ç»“æ„ç®—æ³•ï¼ˆé™¤äº†Hashç®—æ³•ï¼‰æ‰€å¿…é¡»çš„ï¼Œæ˜¯"),v("strong",[t._v("äºŒåˆ†æŸ¥æ‰¾æ³•")]),t._v("(åˆ†è€Œæ²»ä¹‹)çš„å‰æã€‚\n"),v("ul",[v("li",[t._v("MySq-InnoDB B+æ ‘æ˜¯ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ï¼Œå‡è®¾ Id æ˜¯æ— åºçš„ï¼ŒB+ æ ‘ ä¸ºäº†ç»´æŠ¤ ID çš„æœ‰åºæ€§ï¼Œå°±ä¼šé¢‘ç¹çš„åœ¨ç´¢å¼•çš„ä¸­é—´ä½ç½®æ’å…¥è€ŒæŒªåŠ¨åé¢èŠ‚ç‚¹çš„ä½ç½®ï¼Œç”šè‡³å¯¼è‡´é¢‘ç¹çš„é¡µåˆ†è£‚ï¼Œè¿™å¯¹äºæ€§èƒ½çš„å½±å“æ˜¯æå¤§çš„ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯IDçš„æœ‰åºæ€§è¿™ç§æƒ…å†µå°±å®Œå…¨ä¸åŒäº†ï¼Œåªéœ€è¦è¿›è¡Œè¿½åŠ å†™æ“ä½œã€‚æ‰€ä»¥ ID çš„æœ‰åºæ€§æ˜¯éå¸¸é‡è¦çš„ï¼Œä¹Ÿæ˜¯IDè®¾è®¡ä¸å¯é¿å…çš„ç‰¹æ€§ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("ååé‡/æ€§èƒ½(ops/time)")]),t._v("ï¼šå³å•ä½æ—¶é—´ï¼ˆæ¯ç§’ï¼‰èƒ½äº§ç”Ÿçš„IDæ•°é‡ã€‚ç”ŸæˆIDæ˜¯éå¸¸é«˜é¢‘çš„æ“ä½œï¼Œä¹Ÿæ˜¯æœ€ä¸ºåŸºæœ¬çš„ã€‚å‡è®¾IDç”Ÿæˆçš„æ€§èƒ½ç¼“æ…¢ï¼Œé‚£ä¹ˆä¸ç®¡æ€ä¹ˆè¿›è¡Œç³»ç»Ÿä¼˜åŒ–ä¹Ÿæ— æ³•è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚\n"),v("ul",[v("li",[t._v("ä¸€èˆ¬æˆ‘ä»¬ä¼šé¦–å…ˆç”ŸæˆIDï¼Œç„¶åå†æ‰§è¡Œå†™å…¥æ“ä½œï¼Œå‡è®¾IDç”Ÿæˆç¼“æ…¢ï¼Œé‚£ä¹ˆæ•´ä½“æ€§èƒ½ä¸Šé™å°±ä¼šå—åˆ°é™åˆ¶ï¼Œè¿™ä¸€ç‚¹åº”è¯¥ä¸éš¾ç†è§£ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("ç¨³å®šæ€§(time/op)")]),t._v("ï¼šç¨³å®šæ€§æŒ‡æ ‡ä¸€èˆ¬å¯ä»¥é‡‡ç”¨"),v("strong",[t._v("æ¯ä¸ªæ“ä½œçš„æ—¶é—´è¿›è¡Œç™¾åˆ†ä½é‡‡æ ·")]),t._v("æ¥åˆ†æï¼Œæ¯”å¦‚ "),v("em",[v("a",{attrs:{href:"https://github.com/Ahoo-Wang/CosId",target:"_blank",rel:"noopener noreferrer"}},[t._v("CosId"),v("OutboundLink")],1)]),t._v(" ç™¾åˆ†ä½é‡‡æ · "),v("strong",[t._v("P9999=0.208 us/op")]),t._v("ï¼Œå³ "),v("strong",[t._v("0% ~ 99.99%")]),t._v(" çš„å•ä½æ“ä½œæ—¶é—´å°äºç­‰äº  "),v("strong",[t._v("0.208 us/op")]),t._v("ã€‚\n"),v("ul",[v("li",[v("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%99%BE%E5%88%86%E4%BD%8D%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç™¾åˆ†ä½æ•° WIKI"),v("OutboundLink")],1),t._v(" ï¼šç»Ÿè®¡å­¦æœ¯è¯­ï¼Œè‹¥å°†ä¸€ç»„æ•°æ®ä»å°åˆ°å¤§æ’åºï¼Œå¹¶è®¡ç®—ç›¸åº”çš„ç´¯è®¡ç™¾åˆ†ç‚¹ï¼Œåˆ™æŸç™¾åˆ†ç‚¹æ‰€å¯¹åº”æ•°æ®çš„å€¼ï¼Œå°±ç§°ä¸ºè¿™ç™¾åˆ†ç‚¹çš„ç™¾åˆ†ä½æ•°ï¼Œä»¥Pkè¡¨ç¤ºç¬¬kç™¾åˆ†ä½æ•°ã€‚ç™¾åˆ†ä½æ•°æ˜¯ç”¨æ¥æ¯”è¾ƒä¸ªä½“åœ¨ç¾¤ä½“ä¸­çš„ç›¸å¯¹åœ°ä½é‡æ•°ã€‚")]),t._v(" "),v("li",[t._v("ä¸ºä»€ä¹ˆä¸ç”¨å¹³å‡"),v("em",[t._v("æ¯ä¸ªæ“ä½œçš„æ—¶é—´")]),t._v("ï¼šé©¬è€å¸ˆçš„èº«ä»·è·Ÿä½ çš„èº«ä»·èƒ½å¹³å‡ä¹ˆï¼Ÿå¹³å‡åçš„å€¼æœ‰æ„ä¹‰ä¸ï¼Ÿ")]),t._v(" "),v("li",[t._v("å¯ä»¥ä½¿ç”¨æœ€å°"),v("em",[t._v("æ¯ä¸ªæ“ä½œçš„æ—¶é—´")]),t._v("ã€æœ€å¤§"),v("em",[t._v("æ¯ä¸ªæ“ä½œçš„æ—¶é—´")]),t._v("ä½œä¸ºå‚è€ƒå—ï¼Ÿå› ä¸ºæœ€å°ã€æœ€å¤§å€¼åªè¯´æ˜äº†é›¶ç•Œç‚¹çš„æƒ…å†µï¼Œè™½è¯´å¯ä»¥ä½œä¸ºç¨³å®šæ€§çš„å‚è€ƒï¼Œä½†ä¾ç„¶ä¸å¤Ÿå…¨é¢ã€‚è€Œä¸”"),v("em",[t._v("ç™¾åˆ†ä½æ•°")]),t._v("å·²ç»è¦†ç›–äº†è¿™ä¿©ä¸ªæŒ‡æ ‡ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("è‡ªæ²»æ€§ï¼ˆä¾èµ–ï¼‰")]),t._v("ï¼šä¸»è¦æ˜¯æŒ‡å¯¹å¤–éƒ¨ç¯å¢ƒæœ‰æ— ä¾èµ–ï¼Œæ¯”å¦‚"),v("strong",[t._v("å·æ®µæ¨¡å¼")]),t._v("ä¼šå¼ºä¾èµ–ç¬¬ä¸‰æ–¹å­˜å‚¨ä¸­é—´ä»¶æ¥è·å–"),v("code",[t._v("NexMaxId")]),t._v("ã€‚è‡ªæ²»æ€§è¿˜ä¼šå¯¹å¯ç”¨æ€§é€ æˆå½±å“ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("å¯ç”¨æ€§")]),t._v("ï¼šåˆ†å¸ƒå¼IDçš„å¯ç”¨æ€§ä¸»è¦ä¼šå—åˆ°è‡ªæ²»æ€§å½±å“ï¼Œæ¯”å¦‚"),v("strong",[t._v("SnowflakeId")]),t._v("ä¼šå—åˆ°æ—¶é’Ÿå›æ‹¨å½±å“ï¼Œå¯¼è‡´å¤„äºçŸ­æš‚æ—¶é—´çš„ä¸å¯ç”¨çŠ¶æ€ã€‚è€Œ"),v("strong",[t._v("å·æ®µæ¨¡å¼")]),t._v("ä¼šå—åˆ°ç¬¬ä¸‰æ–¹å‘å·å™¨ï¼ˆ"),v("code",[t._v("NexMaxId")]),t._v("ï¼‰çš„å¯ç”¨æ€§å½±å“ã€‚\n"),v("ul",[v("li",[v("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%8F%AF%E7%94%A8%E6%80%A7",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯ç”¨æ€§ WIKI"),v("OutboundLink")],1),t._v(" ï¼šåœ¨ä¸€ä¸ªç»™å®šçš„æ—¶é—´é—´éš”å†…ï¼Œå¯¹äºä¸€ä¸ªåŠŸèƒ½ä¸ªä½“æ¥è®²ï¼Œæ€»çš„å¯ç”¨æ—¶é—´æ‰€å çš„æ¯”ä¾‹ã€‚")]),t._v(" "),v("li",[t._v("MTBFï¼šå¹³å‡æ•…éšœé—´éš”")]),t._v(" "),v("li",[t._v("MDTï¼šå¹³å‡ä¿®å¤/æ¢å¤æ—¶é—´")]),t._v(" "),v("li",[t._v("Availability=MTBF/(MTBF+MDT)")]),t._v(" "),v("li",[t._v("å‡è®¾MTBFä¸º1å¹´ï¼ŒMDTä¸º1å°æ—¶ï¼Œå³"),v("code",[t._v("Availability=(365*24)/(365*24+1)=0.999885857778792â‰ˆ99.99%")]),t._v("ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´å¯¹å¯ç”¨æ€§4ä¸ª9ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("é€‚åº”æ€§")]),t._v("ï¼šæ˜¯æŒ‡åœ¨é¢å¯¹å¤–éƒ¨ç¯å¢ƒå˜åŒ–çš„è‡ªé€‚åº”èƒ½åŠ›ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦è¯´çš„æ˜¯é¢å¯¹æµé‡çªå‘æ—¶åŠ¨æ€ä¼¸ç¼©åˆ†å¸ƒå¼IDçš„æ€§èƒ½ï¼Œ\n"),v("ul",[v("li",[v("strong",[t._v("SegmentChainId")]),t._v("å¯ä»¥åŸºäº"),v("strong",[t._v("é¥¥é¥¿çŠ¶æ€")]),t._v("è¿›è¡Œ"),v("strong",[t._v("å®‰å…¨è·ç¦»")]),t._v("çš„åŠ¨æ€ä¼¸ç¼©ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("SnowflakeId")]),t._v("å¸¸è§„ä½åˆ†é…æ–¹æ¡ˆæ€§èƒ½æ’å®š409.6Wï¼Œè™½ç„¶å¯ä»¥é€šè¿‡è°ƒæ•´ä½åˆ†é…æ–¹æ¡ˆæ¥è·å¾—ä¸åŒçš„TPSæ€§èƒ½ï¼Œä½†æ˜¯ä½åˆ†é…æ–¹æ³•çš„å˜æ›´æ˜¯ç ´åæ€§çš„ï¼Œä¸€èˆ¬æ ¹æ®ä¸šåŠ¡åœºæ™¯ç¡®å®šä½åˆ†é…æ–¹æ¡ˆåä¸å†å˜æ›´ã€‚")])])]),t._v(" "),v("li",[v("strong",[t._v("å­˜å‚¨ç©ºé—´")]),t._v("ï¼šè¿˜æ˜¯ç”¨MySq-InnoDB B+æ ‘æ¥ä¸¾ä¾‹ï¼Œæ™®é€šç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ä¼šå­˜å‚¨ä¸»é”®å€¼ï¼Œä¸»é”®è¶Šå¤§å ç”¨çš„å†…å­˜ç¼“å­˜ã€ç£ç›˜ç©ºé—´ä¹Ÿä¼šè¶Šå¤§ã€‚Pageé¡µå­˜å‚¨çš„æ•°æ®è¶Šå°‘ï¼Œç£ç›˜IOè®¿é—®çš„æ¬¡æ•°ä¼šå¢åŠ ã€‚æ€»ä¹‹åœ¨æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½å°çš„å­˜å‚¨ç©ºé—´å ç”¨åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹éƒ½æ˜¯å¥½çš„è®¾è®¡åŸåˆ™ã€‚")])]),t._v(" "),v("h3",{attrs:{id:"ä¸åŒåˆ†å¸ƒå¼idæ–¹æ¡ˆæ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ä¸åŒåˆ†å¸ƒå¼idæ–¹æ¡ˆæ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”"}},[t._v("#")]),t._v(" ä¸åŒåˆ†å¸ƒå¼IDæ–¹æ¡ˆæ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("åˆ†å¸ƒå¼ID")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("å…¨å±€å”¯ä¸€æ€§")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æœ‰åºæ€§")]),t._v(" "),v("th",{staticStyle:{"text-align":"right"}},[t._v("ååé‡")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("ç¨³å®šæ€§ï¼ˆ1s=1000,000usï¼‰")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("è‡ªæ²»æ€§")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("å¯ç”¨æ€§")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("é€‚åº”æ€§")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("å­˜å‚¨ç©ºé—´")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("UUID/GUID")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å®Œå…¨æ— åº")]),t._v(" "),v("td",{staticStyle:{"text-align":"right"}},[t._v("3078638(ops/s)")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("P9999=0.325(us/op)")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å®Œå…¨è‡ªæ²»")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("100%")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("128-bit")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SnowflakeId")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æœ¬åœ°å•è°ƒé€’å¢ï¼Œå…¨å±€è¶‹åŠ¿é€’å¢(å—å…¨å±€æ—¶é’Ÿå½±å“)")]),t._v(" "),v("td",{staticStyle:{"text-align":"right"}},[t._v("4096000(ops/s)")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("P9999=0.244(us/op)")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¾èµ–æ—¶é’Ÿ")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ—¶é’Ÿå›æ‹¨ä¼šå¯¼è‡´çŸ­æš‚ä¸å¯ç”¨")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("64-bit")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SegmentId")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æœ¬åœ°å•è°ƒé€’å¢ï¼Œå…¨å±€è¶‹åŠ¿é€’å¢(å—Stepå½±å“)")]),t._v(" "),v("td",{staticStyle:{"text-align":"right"}},[t._v("29506073(ops/s)")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("P9999=46.624(us/op)")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¾èµ–ç¬¬ä¸‰æ–¹å·æ®µåˆ†å‘å™¨")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å—å·æ®µåˆ†å‘å™¨å¯ç”¨æ€§å½±å“")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¦")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("64-bit")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SegmentChainId")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æœ¬åœ°å•è°ƒé€’å¢ï¼Œå…¨å±€è¶‹åŠ¿é€’å¢(å—Stepã€å®‰å…¨è·ç¦»å½±å“)")]),t._v(" "),v("td",{staticStyle:{"text-align":"right"}},[t._v("127439148(ops/s)")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("P9999=0.208(us/op)")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¾èµ–ç¬¬ä¸‰æ–¹å·æ®µåˆ†å‘å™¨")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å—å·æ®µåˆ†å‘å™¨å¯ç”¨æ€§å½±å“ï¼Œä½†å› å®‰å…¨è·ç¦»å­˜åœ¨ï¼Œé¢„ç•™IDæ®µï¼Œæ‰€ä»¥é«˜äºSegmentId")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ˜¯")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("64-bit")])])])]),t._v(" "),v("h3",{attrs:{id:"æœ‰åºæ€§-è¦æƒ³åˆ†è€Œæ²»ä¹‹Â·äºŒåˆ†æŸ¥æ‰¾æ³•-å¿…é¡»è¦ç»´æŠ¤æˆ‘"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰åºæ€§-è¦æƒ³åˆ†è€Œæ²»ä¹‹Â·äºŒåˆ†æŸ¥æ‰¾æ³•-å¿…é¡»è¦ç»´æŠ¤æˆ‘"}},[t._v("#")]),t._v(" æœ‰åºæ€§(è¦æƒ³åˆ†è€Œæ²»ä¹‹Â·äºŒåˆ†æŸ¥æ‰¾æ³•ï¼Œå¿…é¡»è¦ç»´æŠ¤æˆ‘)")]),t._v(" "),v("p",[t._v("åˆšåˆšæˆ‘ä»¬å·²ç»è®¨è®ºäº†IDæœ‰åºæ€§çš„é‡è¦æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾è®¡IDç®—æ³•æ—¶åº”è¯¥å°½å¯èƒ½åœ°è®©IDæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ¯”å¦‚åƒè¡¨çš„è‡ªå¢ä¸»é”®é‚£æ ·ã€‚ä½†æ˜¯å¾ˆé—æ†¾ï¼Œå› å…¨å±€æ—¶é’Ÿã€æ€§èƒ½ç­‰åˆ†å¸ƒå¼ç³»ç»Ÿé—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸åªèƒ½é€‰æ‹©å±€éƒ¨å•è°ƒé€’å¢ã€å…¨å±€è¶‹åŠ¿é€’å¢çš„ç»„åˆï¼ˆå°±åƒæˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¾—ä¸çš„é€‰æ‹©æœ€ç»ˆä¸€è‡´æ€§é‚£æ ·ï¼‰ä»¥è·å¾—å¤šæ–¹é¢çš„æƒè¡¡ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯å•è°ƒé€’å¢ä¸è¶‹åŠ¿é€’å¢ã€‚")]),t._v(" "),v("h4",{attrs:{id:"æœ‰åºæ€§ä¹‹å•è°ƒé€’å¢"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰åºæ€§ä¹‹å•è°ƒé€’å¢"}},[t._v("#")]),t._v(" æœ‰åºæ€§ä¹‹å•è°ƒé€’å¢")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/monotonically-increasing.png"),alt:"å•è°ƒé€’å¢"}})]),t._v(" "),v("p",[t._v("å•è°ƒé€’å¢ï¼šTè¡¨ç¤ºå…¨å±€ç»å¯¹æ—¶ç‚¹ï¼Œå‡è®¾æœ‰T"),v("sub",[t._v("n+1")]),t._v(">T"),v("sub",[t._v("n")]),t._v("ï¼ˆç»å¯¹æ—¶é—´æ€»æ˜¯å¾€å‰è¿›çš„ï¼Œè¿™é‡Œä¸è€ƒè™‘ç›¸å¯¹è®ºã€æ—¶é—´æœºå™¨ç­‰ï¼‰ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰F(T"),v("sub",[t._v("n+1")]),t._v(")>F(T"),v("sub",[t._v("n")]),t._v(")ï¼Œæ•°æ®åº“è‡ªå¢ä¸»é”®å°±å±äºè¿™ä¸€ç±»ã€‚\nå¦å¤–éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯å•è°ƒé€’å¢è·Ÿè¿ç»­æ€§é€’å¢æ˜¯ä¸åŒçš„æ¦‚å¿µã€‚ è¿ç»­æ€§é€’å¢ï¼š"),v("code",[t._v("F(n+1)=(F(n)+step)")]),t._v("å³ä¸‹ä¸€æ¬¡è·å–çš„IDä¸€å®šç­‰äºå½“å‰"),v("code",[t._v("ID+Step")]),t._v("ï¼Œå½“"),v("code",[t._v("Step=1")]),t._v("æ—¶ç±»ä¼¼äºè¿™æ ·ä¸€ä¸ªåºåˆ—:"),v("code",[t._v("1->2->3->4->5")]),t._v("ã€‚")]),t._v(" "),v("blockquote",[v("p",[t._v("æ‰©å±•å°çŸ¥è¯†ï¼šæ•°æ®åº“çš„è‡ªå¢ä¸»é”®ä¹Ÿä¸æ˜¯è¿ç»­æ€§é€’å¢çš„ï¼Œç›¸ä¿¡ä½ ä¸€å®šé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œè¯·æ€è€ƒä¸€ä¸‹æ•°æ®åº“ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ")])]),t._v(" "),v("h4",{attrs:{id:"æœ‰åºæ€§ä¹‹è¶‹åŠ¿é€’å¢"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰åºæ€§ä¹‹è¶‹åŠ¿é€’å¢"}},[t._v("#")]),t._v(" æœ‰åºæ€§ä¹‹è¶‹åŠ¿é€’å¢")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/trend-increasing.png"),alt:"è¶‹åŠ¿é€’å¢"}})]),t._v(" "),v("p",[t._v("è¶‹åŠ¿é€’å¢ï¼šT"),v("sub",[t._v("n")]),t._v(">T"),v("sub",[t._v("n-s")]),t._v("ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡æœ‰F(T"),v("sub",[t._v("n")]),t._v(")>F(T"),v("sub",[t._v("n-s")]),t._v(")ã€‚è™½ç„¶åœ¨ä¸€æ®µæ—¶é—´é—´éš”å†…æœ‰ä¹±åºï¼Œä½†æ˜¯æ•´ä½“è¶‹åŠ¿æ˜¯é€’å¢ã€‚ä»ä¸Šå›¾ä¸Šçœ‹ï¼Œæ˜¯æœ‰ä¸Šå‡è¶‹åŠ¿çš„ï¼ˆè¶‹åŠ¿çº¿ï¼‰ã€‚")]),t._v(" "),v("ul",[v("li",[t._v("åœ¨"),v("strong",[t._v("SnowflakeId")]),t._v("ä¸­"),v("sub",[t._v("n-s")]),t._v("å—åˆ°å…¨å±€æ—¶é’ŸåŒæ­¥å½±å“ã€‚")]),t._v(" "),v("li",[t._v("åœ¨å·æ®µæ¨¡å¼("),v("strong",[t._v("SegmentId")]),t._v(")ä¸­"),v("sub",[t._v("n-s")]),t._v("å—åˆ°å·æ®µå¯ç”¨åŒºé—´("),v("code",[t._v("Step")]),t._v(")å½±å“ã€‚")])]),t._v(" "),v("h2",{attrs:{id:"åˆ†å¸ƒå¼idåˆ†é…æ–¹æ¡ˆ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼idåˆ†é…æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼IDåˆ†é…æ–¹æ¡ˆ")]),t._v(" "),v("h3",{attrs:{id:"uuid-guid"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#uuid-guid"}},[t._v("#")]),t._v(" UUID/GUID")]),t._v(" "),v("ul",[v("li",[t._v("ğŸ‘ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶")]),t._v(" "),v("li",[t._v("ğŸ‘æ€§èƒ½é«˜")]),t._v(" "),v("li",[t._v("ğŸ‘å®Œå…¨æ— åº")]),t._v(" "),v("li",[t._v("ğŸ‘ç©ºé—´å ç”¨å¤§ï¼Œéœ€è¦å ç”¨128ä½å­˜å‚¨ç©ºé—´ã€‚")])]),t._v(" "),v("p",[t._v("UUIDæœ€å¤§çš„ç¼ºé™·æ˜¯éšæœºçš„ã€æ— åºçš„ï¼Œå½“ç”¨äºä¸»é”®æ—¶ä¼šå¯¼è‡´æ•°æ®åº“çš„ä¸»é”®ç´¢å¼•æ•ˆç‡ä½ä¸‹ï¼ˆä¸ºäº†ç»´æŠ¤ç´¢å¼•æ ‘ï¼Œé¢‘ç¹çš„ç´¢å¼•ä¸­é—´ä½ç½®æ’å…¥æ•°æ®ï¼Œè€Œä¸æ˜¯è¿½åŠ å†™ï¼‰ã€‚è¿™ä¹Ÿæ˜¯UUIDä¸é€‚ç”¨äºæ•°æ®åº“ä¸»é”®çš„æœ€ä¸ºé‡è¦çš„åŸå› ã€‚")]),t._v(" "),v("h3",{attrs:{id:"snowflakeid"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#snowflakeid"}},[t._v("#")]),t._v(" SnowflakeId")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/Snowflake-identifier.png"),alt:"SnowflakeId"}})]),t._v(" "),v("blockquote",[v("p",[v("em",[t._v("SnowflakeId")]),t._v("ä½¿ç”¨"),v("code",[t._v("Long")]),t._v("ï¼ˆ64-bitï¼‰ä½åˆ†åŒºæ¥ç”ŸæˆIDçš„ä¸€ç§åˆ†å¸ƒå¼IDç®—æ³•ã€‚\né€šç”¨çš„ä½åˆ†é…æ–¹æ¡ˆä¸ºï¼š"),v("code",[t._v("timestamp")]),t._v("(41-bit)+"),v("code",[t._v("machineId")]),t._v("(10-bit)+"),v("code",[t._v("sequence")]),t._v("(12-bit)=63-bitã€‚")])]),t._v(" "),v("ul",[v("li",[t._v("41-bit"),v("code",[t._v("timestamp")]),t._v("=(1L<<41)/(1000/3600/365)ï¼Œçº¦å¯ä»¥å­˜å‚¨69å¹´çš„æ—¶é—´æˆ³ï¼Œå³å¯ä»¥ä½¿ç”¨çš„ç»å¯¹æ—¶é—´ä¸º"),v("code",[t._v("EPOCH")]),t._v("+69å¹´ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰"),v("code",[t._v("EPOCH")]),t._v("ä¸ºäº§å“å¼€å‘æ—¶é—´ï¼Œå¦å¤–è¿˜å¯ä»¥é€šè¿‡å‹ç¼©å…¶ä»–åŒºåŸŸçš„åˆ†é…ä½æ•°ï¼Œæ¥å¢åŠ æ—¶é—´æˆ³ä½æ•°æ¥å»¶é•¿å¯ç”¨æ—¶é—´ã€‚")]),t._v(" "),v("li",[t._v("10-bit"),v("code",[t._v("machineId")]),t._v("=(1L<<10)=1024ï¼Œå³ç›¸åŒä¸šåŠ¡å¯ä»¥éƒ¨ç½²1024ä¸ªå‰¯æœ¬(åœ¨Kubernetesæ¦‚å¿µé‡Œæ²¡æœ‰ä¸»ä»å‰¯æœ¬ä¹‹åˆ†ï¼Œè¿™é‡Œç›´æ¥æ²¿ç”¨Kubernetesçš„å®šä¹‰)ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ²¡æœ‰å¿…è¦ä½¿ç”¨è¿™ä¹ˆå¤šä½ï¼Œæ‰€ä»¥ä¼šæ ¹æ®éƒ¨ç½²è§„æ¨¡éœ€è¦é‡æ–°å®šä¹‰ã€‚")]),t._v(" "),v("li",[t._v("12-bit"),v("code",[t._v("sequence")]),t._v("=(1L<<12)*1000=4096000ï¼Œå³å•æœºæ¯ç§’å¯ç”Ÿæˆçº¦409Wçš„IDï¼Œå…¨å±€åŒä¸šåŠ¡é›†ç¾¤å¯äº§ç”Ÿ"),v("code",[t._v("4096000*1024=419430W=41.9äº¿(TPS)")]),t._v("ã€‚")])]),t._v(" "),v("p",[t._v("ä» "),v("em",[t._v("SnowflakeId")]),t._v(" è®¾è®¡ä¸Šå¯ä»¥çœ‹å‡º:")]),t._v(" "),v("ul",[v("li",[t._v("ğŸ‘"),v("code",[t._v("timestamp")]),t._v("åœ¨é«˜ä½ï¼Œå•å®ä¾‹"),v("em",[t._v("SnowflakeId")]),t._v("æ˜¯ä¼šä¿è¯æ—¶é’Ÿæ€»æ˜¯å‘å‰çš„ï¼ˆæ ¡éªŒæœ¬æœºæ—¶é’Ÿå›æ‹¨ï¼‰ï¼Œæ‰€ä»¥æ˜¯æœ¬æœºå•è°ƒé€’å¢çš„ã€‚å—å…¨å±€æ—¶é’ŸåŒæ­¥/æ—¶é’Ÿå›æ‹¨å½±å“"),v("em",[t._v("SnowflakeId")]),t._v("æ˜¯å…¨å±€è¶‹åŠ¿é€’å¢çš„ã€‚")]),t._v(" "),v("li",[t._v("ğŸ‘"),v("em",[t._v("SnowflakeId")]),t._v("ä¸å¯¹ä»»ä½•ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶æœ‰å¼ºä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿéå¸¸é«˜ã€‚")]),t._v(" "),v("li",[t._v("ğŸ‘ä½åˆ†é…æ–¹æ¡ˆå¯ä»¥æŒ‰ç…§ä¸šåŠ¡ç³»ç»Ÿéœ€è¦çµæ´»é…ç½®ï¼Œæ¥è¾¾åˆ°æœ€ä¼˜ä½¿ç”¨æ•ˆæœã€‚")]),t._v(" "),v("li",[t._v("ğŸ‘å¼ºä¾èµ–æœ¬æœºæ—¶é’Ÿï¼Œæ½œåœ¨çš„æ—¶é’Ÿå›æ‹¨é—®é¢˜ä¼šå¯¼è‡´IDé‡å¤ã€å¤„äºçŸ­æš‚çš„ä¸å¯ç”¨çŠ¶æ€ã€‚")]),t._v(" "),v("li",[t._v("ğŸ‘"),v("code",[t._v("machineId")]),t._v("éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼Œå®é™…éƒ¨ç½²æ—¶å¦‚æœé‡‡ç”¨æ‰‹åŠ¨åˆ†é…"),v("code",[t._v("machineId")]),t._v("ï¼Œä¼šéå¸¸ä½æ•ˆã€‚")])]),t._v(" "),v("h4",{attrs:{id:"snowflakeidä¹‹æœºå™¨å·åˆ†é…é—®é¢˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#snowflakeidä¹‹æœºå™¨å·åˆ†é…é—®é¢˜"}},[t._v("#")]),t._v(" SnowflakeIdä¹‹æœºå™¨å·åˆ†é…é—®é¢˜")]),t._v(" "),v("p",[t._v("åœ¨"),v("strong",[t._v("SnowflakeId")]),t._v("ä¸­æ ¹æ®ä¸šåŠ¡è®¾è®¡çš„ä½åˆ†é…æ–¹æ¡ˆç¡®å®šäº†åŸºæœ¬ä¸Šå°±ä¸å†æœ‰å˜æ›´äº†ï¼Œä¹Ÿå¾ˆå°‘éœ€è¦ç»´æŠ¤ã€‚ä½†æ˜¯"),v("code",[t._v("machineId")]),t._v("æ€»æ˜¯éœ€è¦é…ç½®çš„ï¼Œè€Œä¸”é›†ç¾¤ä¸­æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œå¦åˆ™åˆ†åŒºåŸåˆ™å°±ä¼šè¢«ç ´åè€Œå¯¼è‡´IDå”¯ä¸€æ€§åŸåˆ™ç ´åï¼Œå½“é›†ç¾¤è§„æ¨¡è¾ƒå¤§æ—¶"),v("code",[t._v("machineId")]),t._v("çš„ç»´æŠ¤å·¥ä½œæ˜¯éå¸¸ç¹çï¼Œä½æ•ˆçš„ã€‚")]),t._v(" "),v("blockquote",[v("p",[t._v("æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜çš„ï¼Œ"),v("strong",[t._v("SnowflakeId")]),t._v("çš„"),v("strong",[t._v("MachineId")]),t._v("æ˜¯é€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯ç‰©ç†æ¦‚å¿µã€‚\næƒ³è±¡ä¸€ä¸‹å‡è®¾"),v("strong",[t._v("MachineId")]),t._v("æ˜¯ç‰©ç†ä¸Šçš„ï¼Œé‚£ä¹ˆæ„å‘³ç€ä¸€å°æœºå™¨æ‹¥æœ‰åªèƒ½æ‹¥æœ‰ä¸€ä¸ª"),v("strong",[t._v("MachineId")]),t._v("ï¼Œé‚£ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ")])]),t._v(" "),v("blockquote",[v("p",[t._v("ç›®å‰ "),v("em",[v("a",{attrs:{href:"https://github.com/Ahoo-Wang/CosId",target:"_blank",rel:"noopener noreferrer"}},[t._v("CosId"),v("OutboundLink")],1)]),t._v(" æä¾›äº†ä»¥ä¸‹äº”ç§ "),v("code",[t._v("MachineId")]),t._v(" åˆ†é…å™¨ã€‚")])]),t._v(" "),v("ul",[v("li",[t._v("ManualMachineIdDistributor: æ‰‹åŠ¨é…ç½®"),v("code",[t._v("machineId")]),t._v("ï¼Œä¸€èˆ¬åªæœ‰åœ¨é›†ç¾¤è§„æ¨¡éå¸¸å°çš„æ—¶å€™æ‰æœ‰å¯èƒ½ä½¿ç”¨ï¼Œä¸æ¨èã€‚")]),t._v(" "),v("li",[t._v("StatefulSetMachineIdDistributor: ä½¿ç”¨"),v("code",[t._v("Kubernetes")]),t._v("çš„"),v("code",[t._v("StatefulSet")]),t._v("æä¾›çš„ç¨³å®šçš„æ ‡è¯†IDï¼ˆHOSTNAME=service-01ï¼‰ä½œä¸ºæœºå™¨å·ã€‚")]),t._v(" "),v("li",[t._v("RedisMachineIdDistributor: ä½¿ç”¨"),v("strong",[t._v("Redis")]),t._v("ä½œä¸ºæœºå™¨å·çš„åˆ†å‘å­˜å‚¨ï¼ŒåŒæ—¶è¿˜ä¼šå­˜å‚¨"),v("code",[t._v("MachineId")]),t._v("çš„ä¸Šä¸€æ¬¡æ—¶é—´æˆ³ï¼Œç”¨äº"),v("strong",[t._v("å¯åŠ¨æ—¶æ—¶é’Ÿå›æ‹¨")]),t._v("çš„æ£€æŸ¥ã€‚")]),t._v(" "),v("li",[t._v("JdbcMachineIdDistributor: ä½¿ç”¨"),v("strong",[t._v("å…³ç³»å‹æ•°æ®åº“")]),t._v("ä½œä¸ºæœºå™¨å·çš„åˆ†å‘å­˜å‚¨ï¼ŒåŒæ—¶è¿˜ä¼šå­˜å‚¨"),v("code",[t._v("MachineId")]),t._v("çš„ä¸Šä¸€æ¬¡æ—¶é—´æˆ³ï¼Œç”¨äº"),v("strong",[t._v("å¯åŠ¨æ—¶æ—¶é’Ÿå›æ‹¨")]),t._v("çš„æ£€æŸ¥ã€‚")]),t._v(" "),v("li",[t._v("ZookeeperMachineIdDistributor: ä½¿ç”¨"),v("strong",[t._v("ZooKeeper")]),t._v("ä½œä¸ºæœºå™¨å·çš„åˆ†å‘å­˜å‚¨ï¼ŒåŒæ—¶è¿˜ä¼šå­˜å‚¨"),v("code",[t._v("MachineId")]),t._v("çš„ä¸Šä¸€æ¬¡æ—¶é—´æˆ³ï¼Œç”¨äº"),v("strong",[t._v("å¯åŠ¨æ—¶æ—¶é’Ÿå›æ‹¨")]),t._v("çš„æ£€æŸ¥ã€‚")])]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/RedisMachineIdDistributor.png"),alt:"RedisMachineIdDistributor"}})]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/Machine-Id-Safe-Guard.png"),alt:"Machine Id Safe Guard"}})]),t._v(" "),v("h4",{attrs:{id:"snowflakeidä¹‹æ—¶é’Ÿå›æ‹¨é—®é¢˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#snowflakeidä¹‹æ—¶é’Ÿå›æ‹¨é—®é¢˜"}},[t._v("#")]),t._v(" SnowflakeIdä¹‹æ—¶é’Ÿå›æ‹¨é—®é¢˜")]),t._v(" "),v("p",[t._v("æ—¶é’Ÿå›æ‹¨çš„è‡´å‘½é—®é¢˜æ˜¯ä¼šå¯¼è‡´IDé‡å¤ã€å†²çªï¼ˆè¿™ä¸€ç‚¹ä¸éš¾ç†è§£ï¼‰ï¼ŒIDé‡å¤æ˜¾ç„¶æ˜¯ä¸èƒ½è¢«å®¹å¿çš„ã€‚\nåœ¨"),v("strong",[t._v("SnowflakeId")]),t._v("ç®—æ³•ä¸­ï¼ŒæŒ‰ç…§"),v("strong",[t._v("MachineId")]),t._v("åˆ†åŒºIDï¼Œæˆ‘ä»¬ä¸éš¾ç†è§£çš„æ˜¯ä¸åŒ"),v("strong",[t._v("MachineId")]),t._v("æ˜¯ä¸å¯èƒ½äº§ç”Ÿç›¸åŒIDçš„ã€‚æ‰€ä»¥æˆ‘ä»¬è§£å†³çš„æ—¶é’Ÿå›æ‹¨é—®é¢˜æ˜¯æŒ‡å½“å‰"),v("strong",[t._v("MachineId")]),t._v("çš„æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼Œè€Œä¸æ˜¯æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹çš„æ—¶é’Ÿå›æ‹¨é—®é¢˜ã€‚")]),t._v(" "),v("p",[v("strong",[t._v("MachineId")]),t._v("æ—¶é’Ÿå›æ‹¨é—®é¢˜å¤§ä½“å¯ä»¥åˆ†ä¸ºä¿©ç§æƒ…å†µï¼š")]),t._v(" "),v("ul",[v("li",[t._v("è¿è¡Œæ—¶æ—¶é’Ÿå›æ‹¨ï¼šå³åœ¨è¿è¡Œæ—¶è·å–çš„å½“å‰æ—¶é—´æˆ³æ¯”ä¸Šä¸€æ¬¡è·å–çš„æ—¶é—´æˆ³å°ã€‚è¿™ä¸ªåœºæ™¯çš„æ—¶é’Ÿå›æ‹¨æ˜¯å¾ˆå®¹æ˜“å¤„ç†çš„ï¼Œä¸€èˆ¬"),v("strong",[t._v("SnowflakeId")]),t._v("ä»£ç å®ç°æ—¶éƒ½ä¼šå­˜å‚¨"),v("code",[t._v("lastTimestamp")]),t._v("ç”¨äºè¿è¡Œæ—¶æ—¶é’Ÿå›æ‹¨çš„æ£€æŸ¥ï¼Œå¹¶æŠ›å‡ºæ—¶é’Ÿå›æ‹¨å¼‚å¸¸ã€‚\n"),v("ul",[v("li",[t._v("æ—¶é’Ÿå›æ‹¨æ—¶ç›´æ¥æŠ›å‡ºå¼‚å¸¸æ˜¯ä¸å¤ªå¥½åœ°å®è·µï¼Œå› ä¸ºä¸‹æ¸¸ä½¿ç”¨æ–¹å‡ ä¹æ²¡æœ‰å…¶ä»–å¤„ç†æ–¹æ¡ˆï¼ˆå™¢ï¼Œæˆ‘è¿˜èƒ½æ€ä¹ˆåŠå‘¢ï¼Œç­‰å§ï¼‰ï¼Œæ—¶é’ŸåŒæ­¥æ˜¯å”¯ä¸€çš„é€‰æ‹©ï¼Œå½“åªæœ‰ä¸€ç§é€‰æ‹©æ—¶å°±ä¸è¦å†è®©ç”¨æˆ·é€‰æ‹©äº†ã€‚")]),t._v(" "),v("li",[v("code",[t._v("ClockSyncSnowflakeId")]),t._v("æ˜¯"),v("code",[t._v("SnowflakeId")]),t._v("çš„åŒ…è£…å™¨ï¼Œå½“å‘ç”Ÿæ—¶é’Ÿå›æ‹¨æ—¶ä¼šä½¿ç”¨"),v("code",[t._v("ClockBackwardsSynchronizer")]),t._v("ä¸»åŠ¨ç­‰å¾…æ—¶é’ŸåŒæ­¥æ¥é‡æ–°ç”ŸæˆIDï¼Œæä¾›æ›´åŠ å‹å¥½çš„ä½¿ç”¨ä½“éªŒã€‚")])])]),t._v(" "),v("li",[t._v("å¯åŠ¨æ—¶æ—¶é’Ÿå›æ‹¨ï¼šå³åœ¨å¯åŠ¨æœåŠ¡å®ä¾‹æ—¶è·å–çš„å½“å‰æ—¶é’Ÿæ¯”ä¸Šæ¬¡å…³é—­æœåŠ¡æ—¶å°ã€‚æ­¤æ—¶çš„"),v("code",[t._v("lastTimestamp")]),t._v("æ˜¯æ— æ³•å­˜å‚¨åœ¨è¿›ç¨‹å†…å­˜ä¸­çš„ã€‚å½“è·å–çš„å¤–éƒ¨å­˜å‚¨çš„"),v("strong",[t._v("æœºå™¨çŠ¶æ€")]),t._v("å¤§äºå½“å‰æ—¶é’Ÿæ—¶é’Ÿæ—¶ï¼Œä¼šä½¿ç”¨"),v("code",[t._v("ClockBackwardsSynchronizer")]),t._v("ä¸»åŠ¨åŒæ­¥æ—¶é’Ÿã€‚\n"),v("ul",[v("li",[t._v("LocalMachineStateStorageï¼šä½¿ç”¨æœ¬åœ°æ–‡ä»¶å­˜å‚¨"),v("code",[t._v("MachineState")]),t._v("(æœºå™¨å·ã€æœ€è¿‘ä¸€æ¬¡æ—¶é—´æˆ³)ã€‚å› ä¸ºä½¿ç”¨çš„æ˜¯æœ¬åœ°æ–‡ä»¶æ‰€ä»¥åªæœ‰å½“å®ä¾‹çš„éƒ¨ç½²ç¯å¢ƒæ˜¯ç¨³å®šçš„ï¼Œ"),v("code",[t._v("LocalMachineStateStorage")]),t._v("æ‰é€‚ç”¨ã€‚")]),t._v(" "),v("li",[t._v("RedisMachineIdDistributorï¼šå°†"),v("code",[t._v("MachineState")]),t._v("å­˜å‚¨åœ¨"),v("strong",[t._v("Redis")]),t._v("åˆ†å¸ƒå¼ç¼“å­˜ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ€»æ˜¯å¯ä»¥è·å–åˆ°ä¸Šæ¬¡æœåŠ¡å®ä¾‹åœæœºæ—¶"),v("strong",[t._v("æœºå™¨çŠ¶æ€")]),t._v("ã€‚")])])])]),t._v(" "),v("h4",{attrs:{id:"snowflakeidä¹‹javascriptæ•°å€¼æº¢å‡ºé—®é¢˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#snowflakeidä¹‹javascriptæ•°å€¼æº¢å‡ºé—®é¢˜"}},[t._v("#")]),t._v(" SnowflakeIdä¹‹JavaScriptæ•°å€¼æº¢å‡ºé—®é¢˜")]),t._v(" "),v("p",[v("code",[t._v("JavaScript")]),t._v("çš„"),v("code",[t._v("Number.MAX_SAFE_INTEGER")]),t._v("åªæœ‰53-bitï¼Œå¦‚æœç›´æ¥å°†63ä½çš„"),v("code",[t._v("SnowflakeId")]),t._v("è¿”å›ç»™å‰ç«¯ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿå€¼æº¢å‡ºçš„æƒ…å†µï¼ˆæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åº”è¯¥çŸ¥é“åç«¯ä¼ ç»™å‰ç«¯çš„"),v("code",[t._v("long")]),t._v("å€¼æº¢å‡ºé—®é¢˜ï¼Œ"),v("strong",[t._v("è¿Ÿæ—©")]),t._v("ä¼šå‡ºç°ï¼Œåªä¸è¿‡SnowflakeIdå‡ºç°å¾—æ›´å¿«è€Œå·²ï¼‰ã€‚\nå¾ˆæ˜¾ç„¶æº¢å‡ºæ˜¯ä¸èƒ½è¢«æ¥å—çš„ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¿©ç§å¤„ç†æ–¹æ¡ˆï¼š")]),t._v(" "),v("ul",[v("li",[t._v("å°†ç”Ÿæˆçš„63-bit"),v("code",[t._v("SnowflakeId")]),t._v("è½¬æ¢ä¸º"),v("code",[t._v("String")]),t._v("ç±»å‹ã€‚\n"),v("ul",[v("li",[t._v("ç›´æ¥å°†"),v("code",[t._v("long")]),t._v("è½¬æ¢æˆ"),v("code",[t._v("String")]),t._v("ã€‚")]),t._v(" "),v("li",[t._v("ä½¿ç”¨"),v("code",[t._v("SnowflakeFriendlyId")]),t._v("å°†"),v("code",[t._v("SnowflakeId")]),t._v("è½¬æ¢æˆæ¯”è¾ƒå‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼š"),v("code",[t._v("{timestamp}-{machineId}-{sequence} -> 20210623131730192-1-0")])])])]),t._v(" "),v("li",[t._v("è‡ªå®šä¹‰"),v("code",[t._v("SnowflakeId")]),t._v("ä½åˆ†é…æ¥ç¼©çŸ­"),v("code",[t._v("SnowflakeId")]),t._v("çš„ä½æ•°ï¼ˆ53-bitï¼‰ä½¿ "),v("code",[t._v("ID")]),t._v(" æä¾›ç»™å‰ç«¯æ—¶ä¸æº¢å‡º\n"),v("ul",[v("li",[t._v("ä½¿ç”¨"),v("code",[t._v("SafeJavaScriptSnowflakeId")]),t._v("("),v("code",[t._v("JavaScript")]),t._v(" å®‰å…¨çš„ "),v("code",[t._v("SnowflakeId")]),t._v(")")])])])]),t._v(" "),v("h2",{attrs:{id:"å·æ®µæ¨¡å¼-segmentid"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#å·æ®µæ¨¡å¼-segmentid"}},[t._v("#")]),t._v(" å·æ®µæ¨¡å¼ï¼ˆSegmentIdï¼‰")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/SegmentId.png"),alt:"SegmentId"}})]),t._v(" "),v("p",[t._v("ä»ä¸Šé¢çš„è®¾è®¡å›¾ä¸­ï¼Œä¸éš¾çœ‹å‡º"),v("strong",[t._v("å·æ®µæ¨¡å¼")]),t._v("åŸºæœ¬è®¾è®¡æ€è·¯æ˜¯é€šè¿‡æ¯æ¬¡è·å–ä¸€å®šé•¿åº¦ï¼ˆStepï¼‰çš„å¯ç”¨IDï¼ˆIdæ®µ/å·æ®µï¼‰ï¼Œæ¥é™ä½ç½‘ç»œIOè¯·æ±‚æ¬¡æ•°ï¼Œæå‡æ€§èƒ½ã€‚")]),t._v(" "),v("ul",[v("li",[t._v("ğŸ‘å¼ºä¾èµ–ç¬¬ä¸‰æ–¹å·æ®µåˆ†å‘å™¨ï¼Œå¯ç”¨æ€§å—åˆ°ç¬¬ä¸‰æ–¹åˆ†å‘å™¨å½±å“ã€‚")]),t._v(" "),v("li",[t._v("ğŸ‘æ¯æ¬¡å·æ®µç”¨å®Œæ—¶è·å–"),v("code",[t._v("NextMaxId")]),t._v("éœ€è¦è¿›è¡Œç½‘ç»œIOè¯·æ±‚ï¼Œæ­¤æ—¶çš„æ€§èƒ½ä¼šæ¯”è¾ƒä½ã€‚")]),t._v(" "),v("li",[t._v("å•å®ä¾‹IDå•è°ƒé€’å¢ï¼Œå…¨å±€è¶‹åŠ¿é€’å¢ã€‚\n"),v("ul",[v("li",[t._v("ä»è®¾è®¡å›¾ä¸­ä¸éš¾çœ‹å‡º"),v("strong",[t._v("Instance 1")]),t._v("æ¯æ¬¡è·å–çš„"),v("code",[t._v("NextMaxId")]),t._v("ï¼Œä¸€å®šæ¯”ä¸Šä¸€æ¬¡å¤§ï¼Œæ„å‘³ç€ä¸‹ä¸€æ¬¡çš„å·æ®µä¸€å®šæ¯”ä¸Šä¸€æ¬¡å¤§ï¼Œæ‰€ä»¥ä»å•å®ä¾‹ä¸Šæ¥çœ‹æ˜¯å•è°ƒé€’å¢çš„ã€‚")]),t._v(" "),v("li",[t._v("å¤šå®ä¾‹å„è‡ªæŒæœ‰çš„ä¸åŒçš„å·æ®µï¼Œæ„å‘³ç€åŒä¸€æ—¶åˆ»ä¸åŒå®ä¾‹ç”Ÿæˆçš„IDæ˜¯ä¹±åºçš„ï¼Œä½†æ˜¯æ•´ä½“è¶‹åŠ¿çš„é€’å¢çš„ï¼Œæ‰€ä»¥å…¨å±€è¶‹åŠ¿é€’å¢ã€‚")])])]),t._v(" "),v("li",[t._v("IDä¹±åºç¨‹åº¦å—åˆ°Stepé•¿åº¦ä»¥åŠé›†ç¾¤è§„æ¨¡å½±å“ï¼ˆä»è¶‹åŠ¿é€’å¢å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼‰ã€‚\n"),v("ul",[v("li",[t._v("å‡è®¾é›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹æ—¶"),v("strong",[t._v("å·æ®µæ¨¡å¼")]),t._v("å°±æ˜¯å•è°ƒé€’å¢çš„ã€‚")]),t._v(" "),v("li",[v("code",[t._v("Step")]),t._v("è¶Šå°ï¼Œä¹±åºç¨‹åº¦è¶Šå°ã€‚å½“"),v("code",[t._v("Step=1")]),t._v("æ—¶ï¼Œå°†æ— é™æ¥è¿‘å•è°ƒé€’å¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œæ˜¯æ— é™æ¥è¿‘è€Œéç­‰äºå•è°ƒé€’å¢ï¼Œå…·ä½“åŸå› ä½ å¯ä»¥æ€è€ƒä¸€ä¸‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š\n"),v("ul",[v("li",[t._v("å·æ®µåˆ†å‘å™¨T"),v("sub",[t._v("1")]),t._v("æ—¶åˆ»ç»™"),v("strong",[t._v("Instance 1")]),t._v("åˆ†å‘äº†"),v("code",[t._v("ID=1")]),t._v(",T"),v("sub",[t._v("2")]),t._v("æ—¶åˆ»ç»™"),v("strong",[t._v("Instance 2")]),t._v("åˆ†å‘äº†"),v("code",[t._v("ID=2")]),t._v("ã€‚å› ä¸ºæœºå™¨æ€§èƒ½ã€ç½‘ç»œç­‰åŸå› ï¼Œ"),v("code",[t._v("Instance 2")]),t._v("ç½‘ç»œIOå†™è¯·æ±‚å…ˆäº"),v("code",[t._v("Instance 1")]),t._v("åˆ°è¾¾ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯¹äºæ•°æ®åº“æ¥è¯´ï¼ŒIDä¾ç„¶æ˜¯ä¹±åºçš„ã€‚")])])])])])]),t._v(" "),v("h2",{attrs:{id:"å·æ®µé“¾æ¨¡å¼-segmentchainid"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#å·æ®µé“¾æ¨¡å¼-segmentchainid"}},[t._v("#")]),t._v(" å·æ®µé“¾æ¨¡å¼ï¼ˆSegmentChainIdï¼‰")]),t._v(" "),v("p",{attrs:{align:"center"}},[v("img",{attrs:{src:t.$withBase("/assets/design/SegmentChainId.png"),alt:"SegmentChainId"}})]),t._v(" "),v("p",[v("strong",[t._v("SegmentChainId")]),t._v("æ˜¯"),v("strong",[t._v("SegmentId")]),t._v("å¢å¼ºç‰ˆï¼Œç›¸æ¯”äº"),v("strong",[t._v("SegmentId")]),t._v("æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š")]),t._v(" "),v("ul",[v("li",[t._v("ç¨³å®šæ€§ï¼š"),v("strong",[t._v("SegmentId")]),t._v("çš„ç¨³å®šæ€§é—®é¢˜ï¼ˆP9999=46.624(us/op)ï¼‰ä¸»è¦æ˜¯å› ä¸ºå·æ®µç”¨å®Œä¹‹ååŒæ­¥è¿›è¡Œ"),v("code",[t._v("NextMaxId")]),t._v("çš„è·å–å¯¼è‡´çš„ï¼ˆä¼šäº§ç”Ÿç½‘ç»œIOï¼‰ã€‚\n"),v("ul",[v("li",[v("strong",[t._v("SegmentChainId")]),t._v(" ï¼ˆP9999=0.208(us/op)ï¼‰å¼•å…¥äº†æ–°çš„è§’è‰²"),v("strong",[t._v("PrefetchWorker")]),t._v("ç”¨ä»¥ç»´æŠ¤å’Œä¿è¯"),v("strong",[t._v("å®‰å…¨è·ç¦»")]),t._v("ï¼Œç†æƒ³æƒ…å†µä¸‹ä½¿å¾—è·å–IDçš„çº¿ç¨‹å‡ ä¹å®Œå…¨ä¸éœ€è¦è¿›è¡ŒåŒæ­¥çš„ç­‰å¾…"),v("code",[t._v("NextMaxId")]),t._v("è·å–ï¼Œæ€§èƒ½å¯è¾¾åˆ°è¿‘ä¼¼ "),v("code",[t._v("AtomicLong")]),t._v(" çš„ "),v("em",[t._v("TPS æ€§èƒ½:12743W+/s")]),t._v(" "),v("RouterLink",{attrs:{to:"/guide/perf-test.html"}},[t._v("JMH åŸºå‡†æµ‹è¯•")]),t._v(" ã€‚")],1)])]),t._v(" "),v("li",[t._v("é€‚åº”æ€§ï¼šä»"),v("strong",[t._v("SegmentId")]),t._v("ä»‹ç»ä¸­æˆ‘ä»¬çŸ¥é“äº†å½±å“"),v("strong",[t._v("IDä¹±åº")]),t._v("çš„å› ç´ æœ‰ä¿©ä¸ªï¼šé›†ç¾¤è§„æ¨¡ã€"),v("code",[t._v("Step")]),t._v("å¤§å°ã€‚é›†ç¾¤è§„æ¨¡æ˜¯æˆ‘ä»¬ä¸èƒ½æ§åˆ¶çš„ï¼Œä½†æ˜¯"),v("code",[t._v("Step")]),t._v("æ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚\n"),v("ul",[v("li",[v("code",[t._v("Step")]),t._v("åº”è¯¥è¿‘å¯èƒ½å°æ‰èƒ½ä½¿å¾—"),v("strong",[t._v("IDå•è°ƒé€’å¢")]),t._v("çš„å¯èƒ½æ€§å¢å¤§ã€‚")]),t._v(" "),v("li",[v("code",[t._v("Step")]),t._v("å¤ªå°ä¼šå½±å“ååé‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åˆç†è®¾ç½®"),v("code",[t._v("Step")]),t._v("å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬æ— æ³•å‡†ç¡®é¢„ä¼°æ‰€æœ‰æ—¶ç‚¹çš„ååé‡éœ€æ±‚ï¼Œé‚£ä¹ˆæœ€å¥½çš„åŠæ³•æ˜¯ååé‡éœ€æ±‚é«˜æ—¶ï¼ŒStepè‡ªåŠ¨å¢å¤§ï¼Œååé‡ä½æ—¶Stepè‡ªåŠ¨æ”¶ç¼©ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("SegmentChainId")]),t._v("å¼•å…¥äº†"),v("strong",[t._v("é¥¥é¥¿çŠ¶æ€")]),t._v("çš„æ¦‚å¿µï¼Œ"),v("strong",[t._v("PrefetchWorker")]),t._v("ä¼šæ ¹æ®"),v("strong",[t._v("é¥¥é¥¿çŠ¶æ€")]),t._v("æ£€æµ‹å½“å‰"),v("strong",[t._v("å®‰å…¨è·ç¦»")]),t._v("æ˜¯å¦éœ€è¦è†¨èƒ€æˆ–è€…æ”¶ç¼©ï¼Œä»¥ä¾¿è·å¾—ååé‡ä¸æœ‰åºæ€§ä¹‹é—´çš„æƒè¡¡ï¼Œè¿™ä¾¿æ˜¯"),v("strong",[t._v("SegmentChainId")]),t._v("çš„è‡ªé€‚åº”æ€§ã€‚")])])])])])}),[],!1,null,null,null);e.default=a.exports}}]);